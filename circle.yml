machine:
  services:
    - docker

dependencies:
  pre:
    - echo "$nexus_file" > ~/.ivy2/.credentials
    - cat ~/.ivy2/.credentials

test:
  override:
    - sbt coverage test
  post:
    - sbt coveralls
    - cp -r target/scala-2.11/scoverage-report/* $CIRCLE_ARTIFACTS

deployment:
  hub:
    branch: master
    commands:
      - docker login
      - sbt docker
